<!DOCTYPE HTML>
<html>
  <head>
    <link href="/static/css/pages/pg_create_order.css" rel="stylesheet" type="text/css">
    {{t_layout_header $ "Title" (print .SubTitle `订单`) }}
    <script type="text/javascript" src="/static/js/c/product_cst_generator.js"></script>
    <script type="text/javascript" src="/static/js/p/order/order_create_detail.js"></script>
  </head>
  <body class="PG_create_order">

    {{t_layout_headernav $}}

    <div class="container">

      {{t_layout_leftnav $ "CurPage" `/order/create`}}

      <div class="main_content">
    	<h1>{{.SubTitle}}订单</h1>
        <div class="B_order_step2"></div>

        <form method="POST" id="OrderDetailForm" onkeydown="return(event.keyCode!=13)">
          <input type="hidden" name="Order.TrackNumber" value="{{.Order.TrackNumber}}" >
          <input type="hidden" name="Order.Status" value="{{.Order.Status}}" >
          
          <!-- 客户信息 -->
          <div class="unit">
            <div class="tit"><strong>客户信息</strong></div>
            <div class="B_person_info">
              <span class="B_overdraft">累计欠款：
                <strong class="price">{{.Customer.Accomulated | beautycurrency}}</strong>元
                <input type="hidden" name="Order.Accumulated" value="{{.Customer.Accomulated}}" />
              </span>
              <strong>
                <a href="/person/detail/{{.Customer.Id}}" target="_blank">{{.Customer.Name}}</a>
              </strong>，
              {{.Customer.City}}, {{.Customer.Address}} {{.Customer.Phone}}
            </div>
          </div>

          <!-- ------------------------------- -->
          {{t_order_productselector $ "CustomerId" .Customer.Id}}

          <div class="">
            {{t_order_detailsform $}}
          </div>
          <!-- ------------------------------- -->
          <div class="unit">
            <div class="tit"><strong>发货方式</strong></div>
            <div class="B_express">
              <div class="choose_express">
                <label class="checkedxx">
                  <input type="radio" name="Order.DeliveryMethod" value="YTO">
                  <span class="icon_yto"></span>
                </label>
                <label>
                  <input type="radio" name="Order.DeliveryMethod" value="SF">
                  <span class="icon_sf"></span>
                </label>
                <label>
                  <input type="radio" name="Order.DeliveryMethod" value="TakeAway">
                  <span class="icon_pickup"></span>
                </label>
              </div>
              {{/* >>>> 注释掉，简化流程 >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
              <div class="B_fare">
                运费：<input type="text" size="10" class="express-fee"
                             name="Order.ExpressFee" value="{{.Order.ExpressFee}}"> 
				<label><input type="checkbox" class="daofu" name="DaoFu"> 到付</label>
              </div>
              -------------------------------------------------------------------------------- */}}
            </div>
          </div>
          
		  <div class="unit">
            <div class="tit"><strong>订单备注</strong></div>
		    <div class="B_order_remark">
			  <textarea rows="4" name="Order.Note">{{.Order.Note}}</textarea>
		    </div>
		  </div>
          <div class="btn_content">
            <input type="submit" class="btn_a_l" value="{{.SubmitButton}}">
            <!-- <a class="btn_a_l" href="#">确认下单</a> -->
          </div>
      </div>
      </form>
      
    </div>
  </body>
</html>

<script type="text/javascript">
  $(function(){
    ocd = new OrderCreateDetail({{.CustomerId}})
    
    {{if .IsEdit}}
    // Restore information
    ocd.setExpress("{{.Order.DeliveryMethod}}", {{.Order.ExpressFee}})
    ocd.odf.setData({{.ProductDetailJson}})
    {{end}}
    
  });
</script>
